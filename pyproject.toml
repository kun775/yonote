# Ruff 配置 - 现代 Python 代码检查工具
# https://docs.astral.sh/ruff/

[tool.ruff]
# 目标 Python 版本
target-version = "py311"

# 行长度限制
line-length = 120

# 排除目录
exclude = [
    ".git",
    ".venv",
    "__pycache__",
    "data",
    "*.pyc",
]

[tool.ruff.lint]
# 启用的规则
select = [
    "E",      # pycodestyle 错误
    "W",      # pycodestyle 警告
    "F",      # Pyflakes
    "I",      # isort
    "B",      # flake8-bugbear
    "C4",     # flake8-comprehensions
    "UP",     # pyupgrade
    "S",      # flake8-bandit (安全检查)
]

# 忽略的规则
ignore = [
    "E501",   # 行长度 (由 line-length 控制)
    "S101",   # 使用 assert (测试中需要)
    "S104",   # 绑定所有接口 (开发环境)
    "S105",   # 硬编码密码 (配置文件中有说明)
    "B008",   # 函数调用作为默认参数
]

# 每个文件的规则例外
[tool.ruff.lint.per-file-ignores]
"tests/*" = ["S101"]
"config.py" = ["S105"]

[tool.ruff.format]
# 使用双引号
quote-style = "double"

# 缩进使用空格
indent-style = "space"

# 跳过魔术尾随逗号
skip-magic-trailing-comma = false
